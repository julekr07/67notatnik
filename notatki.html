<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Notatnik</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body { background-color: #000; color: #fff; }
    .bg-secondary { background-color: #111 !important; }
    .bg-dark { background-color: #000 !important; }
    .border-warning { border-color: #ff9800 !important; }
    .text-warning { color: #ff9800 !important; }
    .btn-warning {
      background-color: #ff9800 !important;
      border-color: #ff9800 !important;
      color: #000 !important;
    }
    .form-control {
      background-color: #000 !important;
      border-color: #ff9800 !important;
      color: #fff !important;
    }
    .list-group-item {
      background-color: #000;
      border-color: #ff9800;
      color: #fff;
    }
  </style>
</head>
<body class="container-fluid py-5">

  <div class="row">
    <!-- LEWA KOLUMNA -->
    <div class="col-12 col-md-3">
      <div class="p-3 bg-secondary border border-warning rounded">
        <h3 class="mb-3">Linki</h3>
        <ul class="list-unstyled">
          <li class="mb-2"><a href="login.html" class="text-warning text-decoration-none">Wyloguj siƒô</a></li>
          <li class="mb-2"><a href="tablica.html" class="text-warning text-decoration-none">Tablica</a></li>
          <li><a href="notatki.html" class="text-warning text-decoration-none">Notatki</a></li>
        </ul>
      </div>
    </div>

    <!-- PRAWA KOLUMNA -->
    <div class="col-12 col-md-9">
      <h1 class="text-warning mb-4">üìù M√≥j Notatnik</h1>

      <!-- Formularz dodawania notatki -->
      <div class="mb-3">
        <input id="noteTitle" class="form-control border-warning mb-2" placeholder="Temat notatki (opcjonalny)">
        <textarea id="noteInput" class="form-control border-warning" rows="3" placeholder="Tre≈õƒá notatki..."></textarea>
      </div>
      <button id="addNoteBtn" class="btn btn-warning">Dodaj notatkƒô</button>

      <!-- Lista notatek -->
      <h3 class="text-warning mt-5">Twoje notatki:</h3>
      <ul id="notesList" class="list-group mt-3"></ul>
    </div>
  </div>

  <script>
    // ID u≈ºytkownika
    let userId = localStorage.getItem("userId");
    if (!userId) {
      userId = "user_" + Math.floor(Math.random() * 10000);
      localStorage.setItem("userId", userId);
    }

    // Pobieranie notatek
    let notes = JSON.parse(localStorage.getItem("notes_" + userId)) || [];

    const notesList = document.getElementById("notesList");
    const noteInput = document.getElementById("noteInput");
    const noteTitle = document.getElementById("noteTitle");
    const addNoteBtn = document.getElementById("addNoteBtn");

    // Renderowanie notatek
    function renderNotes() {
      notesList.innerHTML = "";
      notes.forEach((note, index) => {
        const li = document.createElement("li");
        li.className = "list-group-item border-warning d-flex justify-content-between align-items-center";

        // Wy≈õwietlany tekst: temat lub pierwsze 3 s≈Çowa tre≈õci
        let displayText = note.title.trim() ? note.title : note.text.split(" ").slice(0,3).join(" ");
        li.textContent = displayText;

        // Przyciski edycji i usuwania
        const btnGroup = document.createElement("div");

        const editBtn = document.createElement("button");
        editBtn.className = "btn btn-sm btn-warning me-2";
        editBtn.textContent = "Edytuj";
        editBtn.onclick = () => editNote(index);

        const deleteBtn = document.createElement("button");
        deleteBtn.className = "btn btn-sm btn-danger";
        deleteBtn.textContent = "Usu≈Ñ";
        deleteBtn.onclick = () => deleteNote(index);

        btnGroup.appendChild(editBtn);
        btnGroup.appendChild(deleteBtn);

        li.appendChild(btnGroup);
        notesList.appendChild(li);
      });
    }

    // Dodawanie notatki
    addNoteBtn.addEventListener("click", () => {
      const title = noteTitle.value.trim();
      const text = noteInput.value.trim();
      if (text) {
        notes.push({ title, text });
        localStorage.setItem("notes_" + userId, JSON.stringify(notes));
        noteTitle.value = "";
        noteInput.value = "";
        renderNotes();
      }
    });

    // Usuwanie notatki
    function deleteNote(index) {
      notes.splice(index, 1);
      localStorage.setItem("notes_" + userId, JSON.stringify(notes));
      renderNotes();
    }

    // Edycja notatki
    function editNote(index) {
      const note = notes[index];
      noteTitle.value = note.title;
      noteInput.value = note.text;
      deleteNote(index); // usuwamy starƒÖ wersjƒô, nowa zostanie dodana po klikniƒôciu "Dodaj notatkƒô"
    }

    // Inicjalizacja
    renderNotes();
  </script>
</body>
</html>
